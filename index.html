<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DIVYA-DATA | Vedic AI Tarot Engine</title>
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cinzel+Decorative:wght@400;700;900&family=Inter:wght@300;400;600&family=Playfair+Display:ital,wght@0,400;0,900;1,400&family=Noto+Serif+Devanagari:wght@400;700&display=swap" rel="stylesheet">
    
    <style>
        :root {
            --blush-pink: #FDF2F8;
            --soft-lilac: #F5F3FF;
            --sky-blue: #F0F9FF;
            --gold: #D4AF37;
            --deep-purple: #4C1D95;
            --cosmic-gradient: linear-gradient(135deg, #FDF2F8 0%, #F5F3FF 50%, #F0F9FF 100%);
            --btn-gradient: linear-gradient(90deg, #A855F7, #EC4899);
            --glass: rgba(255, 255, 255, 0.6);
            --glass-border: rgba(212, 175, 55, 0.3);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }

        body {
            font-family: 'Inter', sans-serif;
            background-color: #FFF;
            color: #2D2D2D;
            overflow-x: hidden;
            min-height: 100vh;
        }

        h1, h2, h3, .serif {
            font-family: 'Cinzel Decorative', cursive;
            letter-spacing: 1px;
        }

        .sanskrit {
            font-family: 'Noto Serif Devanagari', serif;
            color: var(--gold);
            font-size: 1.4rem;
            margin-bottom: 0.5rem;
        }

        /* --- BACKGROUND --- */
        #canvas-container {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            z-index: -1;
            background: var(--cosmic-gradient);
        }

        /* --- UI COMPONENTS --- */
        .app-container {
            max-width: 1000px;
            margin: 0 auto;
            padding: 2rem;
            position: relative;
            z-index: 10;
        }

        header {
            text-align: center;
            padding: 5rem 1rem;
            animation: fadeIn 2s ease;
        }

        .logo {
            font-family: 'Cinzel Decorative', cursive;
            font-weight: 900;
            color: var(--deep-purple);
            font-size: 1.2rem;
            letter-spacing: 5px;
            margin-bottom: 2rem;
        }

        /* --- FORM SECTION: DHARMA --- */
        .glass-card {
            background: var(--glass);
            backdrop-filter: blur(15px);
            border: 1px solid var(--glass-border);
            border-radius: 30px;
            padding: 3rem;
            margin-bottom: 3rem;
            box-shadow: 0 20px 50px rgba(0,0,0,0.05);
            transition: all 0.5s ease;
        }

        .input-group {
            margin-bottom: 2rem;
        }

        label {
            display: block;
            font-size: 0.8rem;
            font-weight: 700;
            text-transform: uppercase;
            margin-bottom: 0.5rem;
            color: var(--deep-purple);
        }

        input, select {
            width: 100%;
            padding: 1.2rem;
            border-radius: 15px;
            border: 1px solid rgba(0,0,0,0.1);
            background: rgba(255,255,255,0.8);
            font-family: 'Inter', sans-serif;
            font-size: 1rem;
            outline: none;
            transition: border 0.3s;
        }

        input:focus { border-color: var(--gold); }

        /* --- CARD DESIGN --- */
        .tarot-card {
            width: 220px;
            height: 360px;
            perspective: 1000px;
            cursor: pointer;
            margin: 10px;
        }

        .card-inner {
            position: relative;
            width: 100%;
            height: 100%;
            transition: transform 0.8s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            transform-style: preserve-3d;
        }

        .tarot-card.flipped .card-inner {
            transform: rotateY(180deg);
        }

        .card-back, .card-front {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
            border-radius: 15px;
            border: 8px solid #fff;
            box-shadow: 0 15px 35px rgba(0,0,0,0.2);
            overflow: hidden;
        }

        .card-back {
            background: #1a1a1a;
            background-image: url('https://www.transparenttextures.com/patterns/dark-matter.png');
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .card-back::before {
            content: '';
            width: 80%;
            height: 85%;
            border: 2px solid var(--gold);
            position: absolute;
        }

        .card-back::after {
            content: 'ॐ';
            font-size: 4rem;
            color: var(--gold);
            opacity: 0.8;
        }

        .card-front {
            background: white;
            transform: rotateY(180deg);
            display: flex;
            flex-direction: column;
        }

        .card-art {
            height: 70%;
            background-size: cover;
            background-position: center;
            border-bottom: 2px solid var(--gold);
            position: relative;
        }

        .card-title-area {
            flex-grow: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 10px;
            background: #fff;
        }

        .card-name-en {
            font-family: 'Cinzel Decorative', cursive;
            font-size: 0.8rem;
            font-weight: 700;
            color: #1a1a1a;
        }

        .card-name-sk {
            font-family: 'Noto Serif Devanagari', serif;
            font-size: 0.9rem;
            color: var(--gold);
        }

        /* --- SPREAD AREAS --- */
        .ritual-table {
            display: none;
            flex-direction: column;
            align-items: center;
            min-height: 80vh;
        }

        .spread-display {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            gap: 2rem;
            margin-top: 3rem;
        }

        /* --- INTERPRETATION --- */
        .insight-container {
            display: none;
            margin-top: 4rem;
            animation: fadeInUp 1s ease;
        }

        .reading-block {
            margin-bottom: 2.5rem;
        }

        .reading-block h4 {
            color: var(--gold);
            text-transform: uppercase;
            font-size: 0.75rem;
            margin-bottom: 1rem;
            border-left: 3px solid var(--gold);
            padding-left: 10px;
        }

        .reading-text {
            font-family: 'Playfair Display', serif;
            font-size: 1.3rem;
            line-height: 2;
            color: #333;
        }

        /* --- BUTTONS --- */
        .btn-divine {
            background: var(--btn-gradient);
            color: white;
            padding: 1.5rem 4rem;
            border-radius: 50px;
            border: none;
            font-family: 'Cinzel Decorative', cursive;
            font-weight: 700;
            cursor: pointer;
            box-shadow: 0 10px 30px rgba(168, 85, 247, 0.4);
            transition: all 0.3s;
            margin: 20px auto;
            display: block;
        }

        .btn-divine:hover {
            transform: translateY(-3px) scale(1.02);
            box-shadow: 0 15px 40px rgba(168, 85, 247, 0.6);
        }

        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        @keyframes fadeInUp { from { opacity: 0; transform: translateY(30px); } to { opacity: 1; transform: translateY(0); } }

        @media (max-width: 768px) {
            .app-container { padding: 1rem; }
            .tarot-card { width: 160px; height: 260px; }
            .glass-card { padding: 1.5rem; }
        }
    </style>
</head>
<body>

    <div id="canvas-container"><canvas id="cosmic-canvas"></canvas></div>

    <div class="app-container">
        <header>
            <div class="logo">DIVYA-DATA</div>
            <div class="sanskrit">ब्रह्माण्ड दर्शन</div>
            <h1 class="hero-title">Vedic AI Tarot</h1>
        </header>

        <!-- STEP 1: DHARMA (USER DETAILS) -->
        <div id="step-dharma" class="glass-card">
            <h2 class="section-title" style="text-align:center; margin-bottom: 2rem;">Sankalpa (Intent)</h2>
            <div class="input-group">
                <label>Your Name</label>
                <input type="text" id="user-name" placeholder="Enter your full name">
            </div>
            <div class="grid" style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem;">
                <div class="input-group">
                    <label>Birth Date</label>
                    <input type="date" id="user-dob">
                </div>
                <div class="input-group">
                    <label>Reading Domain</label>
                    <select id="user-domain">
                        <option value="love">Prem (Love & Relationships)</option>
                        <option value="career">Karma (Career & Wealth)</option>
                        <option value="general">Moksha (General Path)</option>
                    </select>
                </div>
            </div>
            <div class="input-group">
                <label>Ritual Method</label>
                <select id="user-method">
                    <option value="3">The Trimurti (Past, Present, Future)</option>
                    <option value="1">Ekagrata (Single Card Clarity)</option>
                </select>
            </div>
            <button class="btn-divine" onclick="initiateRitual()">Begin Sankalpa</button>
        </div>

        <!-- STEP 2: RITUAL TABLE -->
        <div id="step-ritual" class="ritual-table">
            <h2 class="sanskrit" style="text-align: center;">दैवीय हस्त</h2>
            <h2 class="section-title" style="text-align:center;">The Shuffling of Fates</h2>
            
            <div id="deck-display" style="position: relative; height: 400px; width: 100%; margin-top: 2rem;">
                <!-- Animated Deck -->
            </div>

            <button class="btn-divine" id="draw-btn" onclick="performDraw()">Draw Your Destiny</button>

            <div class="spread-display" id="spread-display">
                <!-- Drawn Cards -->
            </div>
        </div>

        <!-- STEP 3: INTERPRETATION -->
        <div id="step-insight" class="insight-container">
            <div class="glass-card">
                <div class="sanskrit" style="font-size: 2rem; border-bottom: 1px solid var(--gold); padding-bottom: 10px;">दिव्य दृष्टि</div>
                <h2 style="margin: 1rem 0;">Cosmic Darshana</h2>
                
                <div id="ai-response-area">
                    <!-- Detailed insights will be typed here -->
                </div>

                <button class="btn-divine" style="background: #1a1a1a; margin-top: 3rem;" onclick="location.reload()">Return to Prarambha</button>
            </div>
        </div>
    </div>

    <script>
        const TAROT_DATA = [
            { id: 1, name: "The Fool", sk: "मूढ", art: "https://images.unsplash.com/photo-1572916138173-611993425124?q=80&w=400", meta: "New beginnings, unmanifested potential, and the risk of the unknown." },
            { id: 2, name: "The Magician", sk: "मायावी", art: "https://images.unsplash.com/photo-1614850715649-1d0106293bd1?q=80&w=400", meta: "Manifestation, power, resourcefulness, and spiritual alignment." },
            { id: 3, name: "The High Priestess", sk: "योगिनी", art: "https://images.unsplash.com/photo-1518133910546-b6c2fb7d79e3?q=80&w=400", meta: "Intuition, sacred knowledge, the divine feminine, and subconscious mind." },
            { id: 4, name: "The Empress", sk: "राजराजेश्वरी", art: "https://images.unsplash.com/photo-1502672260266-1c1ef2d93688?q=80&w=400", meta: "Femininity, beauty, nature, nurturing, and abundance." },
            { id: 5, name: "The Emperor", sk: "महाराजा", art: "https://images.unsplash.com/photo-1543269865-cbf427effbad?q=80&w=400", meta: "Authority, establishment, structure, and solid foundation." },
            { id: 6, name: "The Lovers", sk: "युगल", art: "https://images.unsplash.com/photo-1516589174184-e6646f654862?q=80&w=400", meta: "Love, harmony, relationships, values alignment, and choices." },
            { id: 7, name: "The Chariot", sk: "रथ", art: "https://images.unsplash.com/photo-1534731327174-8b0933748283?q=80&w=400", meta: "Control, willpower, victory, and determination." },
            { id: 8, name: "The Sun", sk: "सूर्य", art: "https://images.unsplash.com/photo-1495195129352-aec325b55b65?q=80&w=400", meta: "Enlightenment, joy, success, and vital energy." }
            // Expanding the deck logic dynamically below...
        ];

        let state = {
            name: '',
            domain: '',
            method: 1,
            drawn: []
        };

        /* --- BACKGROUND PARTICLES --- */
        const canvas = document.getElementById('cosmic-canvas');
        const ctx = canvas.getContext('2d');
        let particles = [];
        function initCanvas() {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
            particles = Array.from({length: 120}, () => ({
                x: Math.random() * canvas.width,
                y: Math.random() * canvas.height,
                r: Math.random() * 2,
                v: Math.random() * 0.5 + 0.1,
                o: Math.random()
            }));
        }
        function animate() {
            ctx.clearRect(0,0,canvas.width,canvas.height);
            particles.forEach(p => {
                p.y -= p.v;
                if(p.y < 0) p.y = canvas.height;
                ctx.fillStyle = `rgba(212, 175, 55, ${p.o})`;
                ctx.beginPath(); ctx.arc(p.x, p.y, p.r, 0, Math.PI*2); ctx.fill();
            });
            requestAnimationFrame(animate);
        }
        window.addEventListener('resize', initCanvas);
        initCanvas(); animate();

        /* --- LOGIC FLOW --- */
        function initiateRitual() {
            state.name = document.getElementById('user-name').value || 'Seeker';
            state.domain = document.getElementById('user-domain').value;
            state.method = parseInt(document.getElementById('user-method').value);
            
            document.getElementById('step-dharma').style.opacity = '0';
            setTimeout(() => {
                document.getElementById('step-dharma').style.display = 'none';
                document.getElementById('step-ritual').style.display = 'flex';
                renderDeck();
            }, 500);
        }

        function renderDeck() {
            const container = document.getElementById('deck-display');
            container.innerHTML = '';
            for(let i=0; i<15; i++) {
                const c = document.createElement('div');
                c.className = 'tarot-card';
                c.style.position = 'absolute';
                c.style.left = '50%';
                c.style.top = '50%';
                c.style.transform = `translate(-50%, -50%) rotate(${i * 2}deg) translateY(${i*-1}px)`;
                c.innerHTML = `<div class="card-inner"><div class="card-back"></div></div>`;
                container.appendChild(c);
            }
        }

        async function performDraw() {
            const btn = document.getElementById('draw-btn');
            btn.disabled = true;
            btn.innerText = "Chanting Mantras...";

            // Shuffle Animation
            const cards = document.querySelectorAll('#deck-display .tarot-card');
            cards.forEach(c => {
                c.style.transform = `translate(${(Math.random()-0.5)*800}px, ${(Math.random()-0.5)*400}px) rotate(${Math.random()*360}deg)`;
                c.style.opacity = '0.5';
            });

            await new Promise(r => setTimeout(r, 2000));
            document.getElementById('deck-display').style.display = 'none';
            btn.style.display = 'none';

            // Draw Cards
            const spread = document.getElementById('spread-display');
            const pool = [...TAROT_DATA].sort(() => Math.random() - 0.5);
            state.drawn = pool.slice(0, state.method);

            state.drawn.forEach((card, i) => {
                const wrapper = document.createElement('div');
                wrapper.className = 'tarot-card';
                wrapper.innerHTML = `
                    <div class="card-inner" id="card-${i}">
                        <div class="card-back"></div>
                        <div class="card-front">
                            <div class="card-art" style="background-image:url('${card.art}')"></div>
                            <div class="card-title-area">
                                <div class="card-name-sk">${card.sk}</div>
                                <div class="card-name-en">${card.name}</div>
                            </div>
                        </div>
                    </div>
                `;
                spread.appendChild(wrapper);
                
                setTimeout(() => {
                    document.getElementById(`card-${i}`).parentElement.classList.add('flipped');
                    if(i === state.drawn.length - 1) generateDetailedInterpretation();
                }, (i+1) * 1200);
            });
        }

        function generateDetailedInterpretation() {
            document.getElementById('step-insight').style.display = 'block';
            const area = document.getElementById('ai-response-area');
            
            const intro = `<div class="reading-block">
                <h4>Sankalpa Observation</h4>
                <p class="reading-text">Greetings, ${state.name}. Your intent for <strong>${state.domain.toUpperCase()}</strong> has resonated through the ethereal planes. The cards drawn today are not mere paper; they are mirrors of your current <em>Guna</em> (attributes).</p>
            </div>`;

            let cardInsights = state.drawn.map((c, i) => {
                const labels = ["The Past (Sanchita Karma)", "The Present (Prarabdha Karma)", "The Future (Agami Karma)"];
                const label = state.method === 3 ? labels[i] : "Universal Guidance";
                
                return `<div class="reading-block">
                    <h4>${label}: ${c.name} (${c.sk})</h4>
                    <p class="reading-text">The appearance of ${c.name} signifies a period of ${c.meta.toLowerCase()} This card suggests that you must look beyond the immediate physical reality. In the context of your ${state.domain} focus, it warns against stagnation and encourages a alignment with your higher self.</p>
                </div>`;
            }).join('');

            const conclusion = `<div class="reading-block">
                <h4>Vedic Synthesis</h4>
                <p class="reading-text">Your soul is currently navigating a cycle of transformation. The alignment of ${state.drawn.map(c => c.sk).join(' and ')} points toward a singular truth: Your external circumstances are but shadows of your internal state. Meditate on the symbols revealed, for they hold the key to your upcoming <em>Siddhis</em> (achievements).</p>
            </div>`;

            area.innerHTML = intro + cardInsights + conclusion;
            window.scrollTo({ top: document.body.scrollHeight, behavior: 'smooth' });
        }
    </script>
</body>
</html>
